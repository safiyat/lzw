#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}
#include<stdio.h>
#include<stdlib.h>

void clrscr(void)
{
    char str[] = " [H [2J";
    str[3] = str[0] = 27;
    write(1, str, 7);
}

void initialize(int num[][32], int size)
{
	int i, s;
	for(i=0; i<2; i++)
	{
		s=size;
		while(s--)
		num[i][s]=0;
	}
}

void scan(int num[][32], int size[], int *p)
{
	int i=0, j=0, temp;
	char ch;
	size[0]=size[1]=0;
	while(((ch=getchar())!='\n')&&(j<32)&&(i<2))
	{
		if((ch<48||(ch>57&&ch<65))&&ch!=46&&ch!=45)
		{
			printf("Improper input! Enter again: ");
			i=j=0;
			continue;
		}
		else if(ch==45)
			*p=0;
		else if(ch>47&&ch<58)
			num[i][j++]=ch-48;
		else if(ch>64)
			num[i][j++]=ch-55;
		else if(ch==46)
		{
			i++;
			j=0;
		}
		size[i]=j;
	}
	j=0;
	while(j<size[0]/2)
	{
			temp=num[0][j];
			num[0][j]=num[0][size[0]-j-1];
			num[0][size[0]-j++-1]=temp;
	}
}

void print(int num[][32], int size[], int p)
{
	int i=size[0];
	if(!p)
		printf("-");
	while(i--)
	{
		if(num[0][i]>-1&&num[0][i]<10)
			printf("%d", num[0][i]);
		else if(num[0][i]>9)
			printf("%c", num[0][i]+55);
		if(!i)
			printf(".");
	}
	i++;
	if(!size[1])
	{
		printf("00");
	}
	else
	{
		while(i<size[1])
			if(num[1][i]>-1&&num[1][i]<10)
				printf("%d", num[1][i++]);
			else if(num[1][i]>9)
				printf("%c", num[1][i++]+55);
	}
}

void baseconv(int a[][32], int asize[], int res[][32], int ressize[], int b1, int b2)
{
	float sumf=0;
	int i, sumi=0;
	for(i=0; i<asize[0]; i++)
		sumi=sumi+a[0][i]*pow(b1,i);
	for(i=0; i<asize[1]; i++)
		sumf=sumf+a[1][i]*pow(b1,-(i+1));
	i=0;
	while(sumi)
	{
		res[0][i]=sumi%b2;
		sumi=sumi/b2;
		i++;
	}
	ressize[0]=i;
	i=0;
	if(asize[1]<4)
		asize[1]=4;
	while(asize[1]--)
	{
		sumf=sumf*b2;
		res[1][i]=(int)sumf;
		sumf=sumf-(int)sumf;
		i++;
	}
	ressize[1]=i;
}

int max(int a, int b)
{
	if(a>b)
		return a;
	else
		return b;
}

int compare(int a[][32], int asize[], int b[][32], int bsize[])
{
	int size, i=0;
	if(asize[0]-bsize[0]>-1)
		size=asize[0];
	else
		size=bsize[0];
	while(size)
	{
		if(a[i][size-1]!=b[i][size-1])
			break;
		size--;
	}
	if(!size)
	{
		i++;
		while(size<max(asize[1], bsize[1]))
		{
			if(a[i][size]!=b[i][size++])
				break;
		}
	}
	return a[i][size-1]-b[i][size-1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2);

void add(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, c=0;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			sub(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*ap=1;
			sub(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	baseconv(a, asize, a, asize, b1, b2);
	*resp=*ap;
	i=max(asize[1], bsize[1]);
	while(i--)
	{
		res[1][i]=a[1][i]+b[1][i]+c;
		c=res[1][i]/b2;
		res[1][i]=res[1][i]%b2;
	}
	while(i<max(asize[0], bsize[0]))
	{
		res[0][i]=a[0][i]+b[0][i]+c;
		c=res[0][i]/b2;
		res[0][i]=res[0][i++]%b2;
	}
	res[0][i++]=c;
	ressize[0]=i;
	ressize[1]=asize[1];
}

void sub(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i=0, check;
	baseconv(a, asize, a, asize, b1, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(*ap==1)
		{
			*bp=1;
			add(a, asize, ap, b, bsize, bp, res, ressize, resp, b2, b2);
		}
		else
		{
			*bp=0;
			add(b, bsize, bp, a, asize, ap, res, ressize, resp, b2, b2);
		}
		return;
	}
	check=compare(a, asize, b, bsize);
	if(check>0)
	{
		*resp=1;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=a[1][i]-b[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					a[0][0]--;
				else
					a[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=a[0][i]-b[0][i];
			if(res[0][i]<0)
			{
				a[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
	else if(check<0)
	{
		*resp=0;
		i=max(asize[1], bsize[1]);
		while(i--)
		{
			res[1][i]=b[1][i]-a[1][i];
			if(res[1][i]<0)
			{
				if(!i)
					b[0][0]--;
				else
					b[1][i-1]--;
				res[1][i]+=b2;
			}
		}
		while(i<max(asize[0], bsize[0]))
		{
			res[0][i]=b[0][i]-a[0][i];
			if(res[0][i]<0)
			{
				b[0][i+1]--;
				res[0][i]+=b2;
			}
			i++;
		}
	}
		ressize[0]=max(asize[0], bsize[0]);
		ressize[1]=max(asize[1], bsize[1])-1;
}

void multiply(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, j, num1[64], num2[64], p[64], r[64], num1size, num2size, rsize, c, cr;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<64; i++)
		num1[i]=num2[i]=p[i]=r[i]=0;
	i=asize[1];
	j=0;
	while(i--)
		num1[j++]=a[1][i];
	i=0;
	while(i<asize[0])
		num1[j++]=a[0][i++];
	num1size=asize[0]+asize[1];
	i=bsize[1];
	j=0;
	while(i--)
		num2[j++]=b[1][i];
	i=0;
	while(i<bsize[0])
		num2[j++]=b[0][i++];
	num2size=bsize[0]+bsize[1];
/******************************************************/
	for(i=0; i<num2size; i++)
	{
		c=cr=0;
		for(j=0; j<num1size; j++)
		{
			p[j]=num1[j]*num2[i]+c;
			c=p[j]/b2;
			p[j]=p[j]%b2;
			r[i+j]=r[i+j]+p[j]+cr;
			cr=r[i+j]/b2;
			r[i+j]=r[i+j]%b2;
		}
		p[j]=c;
		r[i+j]=p[j]+cr;
	}
	p[j]=c;
	r[i+j]=p[j]+cr;
	rsize=(i+j);
/******************************************************/
	i=asize[1]+bsize[1];
	j=0;
	ressize[1]=i;
	while(i--)
		res[1][i]=r[j++];
	i=0;
	while(j<rsize)
		res[0][i++]=r[j++];
	ressize[0]=i;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

void division(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i, sum=0, Q=0, dummy=1, q[2][32], qsize[2], qp=1;
	initialize(q, 32);
	qsize[1]=-1;
	baseconv(a, asize, a, asize, b1, b2);
	for(i=0; i<bsize[0]; i++)
		sum=sum+b[0][i]*pow(b2,i);
	if(!sum)
		for(i=0; i<bsize[1]; i++)
			sum=sum+b[1][i]/pow(b2,i+1);
	if(!sum)
	{
		printf("\nDivide by zero error!!!\n");
		ressize[0]=ressize[1]=0;
		printf("Quotient is not defined ");
		return;
	}
	sum=compare(a, asize, b, bsize);
	if(sum<0)
	{
		printf("\nDivisor is bigger than the dividend\n");
		ressize[0]=asize[0];
		ressize[1]=asize[1];
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
		printf("Quotient is 0");
		return;
	}
	if(!sum)
	{
		printf("\nDivisor is equal to the dividend\n");
		ressize[0]=ressize[1]=4;
		printf("Quotient is 1");
		return;
	}
	while(compare(a, asize, b, bsize)>0)
	{
		Q++;
		sub(a, asize, &dummy, b, bsize, &dummy, a, asize, &dummy, b2, b2);
	}
	printf("\n");
	ressize[1]=asize[1];
	ressize[0]=asize[0];
	if(compare(a, asize, b, bsize))
	{
		while(asize[1]--)
			res[1][asize[1]]=a[1][asize[1]];
		while(asize[0]--)
			res[0][asize[0]]=a[0][asize[0]];
	}
	else
		Q++;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
	{
		if(!(*ap))
			*resp=0;
		qp=0;
	}
	qsize[0]=qsize[1]=0;
	while(Q)
	{
		q[0][qsize[0]++]=Q%b2;
		Q/=b2;
	}
	printf("Quotient is ");
	print(q, qsize, qp);
}

void and(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)&&(bsize[1]>i))
		res[1][i]=a[1][i]*b[1][i++];
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)&&(bsize[0]>i))
		res[0][i]=a[0][i]*b[0][i++];
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if((*ap)&&(*bp))
		*resp=1;
}

void or(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(!(a[1][i]+b[1][i++]));
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(!(a[0][i]+b[0][i++]));
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(*ap||*bp)
		*resp=1;
}

void not(int a[][32], int asize[], int *ap, int res[][32], int ressize[2], int *resp, int b1)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	i=0;
	while(asize[1]>i)
		res[1][i]=!a[1][i++];
	ressize[1]=asize[1];
	i=0;
	while(asize[0]>i)
		res[0][i]=!a[0][i++];
	ressize[0]=asize[0];
	baseconv(res, ressize, res, ressize, 2, b1);
	*resp=!(*ap);
}

void nand(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]*b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]*b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void nor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		res[1][i]=!(a[1][i]+b[1][i++]);
	ressize[1]=asize[1]+bsize[1]-max(asize[1], bsize[1]);
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		res[0][i]=!(a[0][i]+b[0][i++]);
	ressize[0]=asize[0]+bsize[0]-max(asize[0], bsize[0]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(!((*ap)||(*bp)))
		*resp=1;
}

void xor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]==1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]==1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	*resp=0;
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=1;
}

void xnor(int a[][32], int asize[], int *ap, int b[][32], int bsize[2], int *bp, int res[][32], int ressize[2], int *resp, int b1, int b2)
{
	int i;
	baseconv(a, asize, a, asize, b1, 2);
	baseconv(b, bsize, b, bsize, b2, 2);
	i=0;
	while((asize[1]>i)||(bsize[1]>i))
		if(a[1][i]+b[1][i++]!=1)
			res[1][i]=1;
	i=0;
	while((asize[0]>i)||(bsize[0]>i))
		if(a[0][i]+b[0][i++]!=1)
			res[0][i]=1;
	ressize[0]=max(asize[0], bsize[0]);
	ressize[1]=max(asize[1], bsize[1]);
	baseconv(res, ressize, res, ressize, 2, b2);
	if(((!(*ap))*(*bp))||((*ap)*(!(*bp))))
		*resp=0;
}

int main()
{
	int b1, b2, a[2][32],asize[2], b[2][32], bsize[2], res[2][32], ressize[2], ap, bp, resp, choice;
lb:
	ressize[0]=ressize[1]=asize[0]=asize[1]=bsize[0]=bsize[1]=32;
	ap=bp=resp=1;
	initialize(res, 32);
	initialize(a, 32);
	initialize(b, 32);
	clrscr();
	printf("1.  BASE CONVERSION\n");
	printf("2.  ADDITION\n");
	printf("3.  SUBTRACTION\n");
	printf("4.  MULTIPLICATION\n");
	printf("5.  DIVISION\n");
	printf("6.  AND\n");
	printf("7.  OR\n");
	printf("8.  NOT\n");
	printf("9.  NAND\n");
	printf("10. NOR\n");
	printf("11. XOR\n");
	printf("12. XNOR\n");
	printf("13. Exit\n");
	printf("\nEnter your choice (1-13): ");
	__fpurge(stdin);
	scanf("%d", &choice);
	__fpurge(stdin);
	clrscr();
	switch(choice)
	{
		case 1:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("Enter the base to which you want to convert: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				baseconv(res, ressize, res, ressize, 2, b2);
				resp=ap;
				printf("\nAfter conversion: ");
				print(res, ressize, resp);
				break;
			}
		case 2:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				add(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter addition: ");
				print(res, ressize, resp);
				break;
			}
		case 3:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				sub(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter subtraction: ");
				print(res, ressize, resp);
				break;
			}
		case 4:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				multiply(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter multiplication: ");
				print(res, ressize, resp);
				break;
			}
		case 5:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				division(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf(" and the remainder is ");
				print(res, ressize, resp);
				printf(" in the base %d", b2);
				break;
			}
		case 6:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				and(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 7:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				or(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter ORing: ");
				print(res, ressize, resp);
				break;
			}
		case 8:	{
				printf("\nEnter the number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the number: ");
				scanf("%d", &b1);
				not(a, asize, &ap, res, ressize, &resp, b1);
				printf("\nAfter complementing: ");
				print(res, ressize, resp);
				break;
			}
		case 9:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nand(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NANDing: ");
				print(res, ressize, resp);
				break;
			}
		case 10:	{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				nor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter NORing: ");
				print(res, ressize, resp);
				break;
			}
		case 11:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XORing: ");
				print(res, ressize, resp);
				break;
			}
		case 12:{
				printf("\nEnter the first number: ");
				scan(a, asize, &ap);
				__fpurge(stdin);
				printf("Enter the base of the first number: ");
				scanf("%d", &b1);
				__fpurge(stdin);
				printf("\nEnter the second number: ");
				scan(b, bsize, &bp);
				__fpurge(stdin);
				printf("Enter the base of the second number: ");
				scanf("%d", &b2);
				__fpurge(stdin);
				xnor(a, asize, &ap, b, bsize, &bp, res, ressize, &resp, b1, b2);
				printf("\nAfter XNORing: ");
				print(res, ressize, resp);
				break;
			}
		case 13:	exit(0);
		
		default:	printf("\nWrong choice!!! Enter again!");
	}
	printf("\n");
	getchar();
	goto lb;
}

